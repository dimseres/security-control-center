# Шаблон `message` для уведомлений мониторинга

Документ описывает, как менять текст уведомлений мониторинга и какие аргументы поддерживает шаблон.

## Где настраивается

Шаблон настраивается в канале уведомлений мониторинга (тип канала `telegram`) в поле `Template`.

Поведение шаблона:

- Если шаблон пустой, отправляется стандартный системный текст.
- Если шаблон заполнен, `{message}` заменяется на стандартный системный текст.
- Если `{message}` отсутствует, отправляется только статический текст шаблона.

## Поддерживаемые аргументы

Сейчас поддерживается только один аргумент:

- `{message}` — полный стандартный текст уведомления (заголовок, имя монитора, цель, ошибка/задержка, время, подпись).

Другие плейсхолдеры (`{name}`, `{url}`, `{error}` и т.д.) пока не обрабатываются.

## Что входит в `{message}`

Состав зависит от типа события:

- `down`:
- заголовок о недоступности монитора;
- имя монитора;
- цель проверки (`URL` или `host:port`);
- причина ошибки (`Ошибка: ...`), включая HTTP status или текст ошибки проверки;
- задержка (если есть);
- время;
- подпись `Berkut SCC`.

- `up`:
- заголовок о восстановлении монитора;
- имя монитора;
- цель проверки;
- задержка (если есть);
- время;
- подпись `Berkut SCC`.

- `tls_expiring`:
- заголовок об истечении сертификата;
- имя монитора;
- цель проверки;
- дата истечения;
- количество дней до истечения;
- время;
- подпись.

## Примеры шаблона

Только системный текст:

```text
{message}
```

Префикс + системный текст:

```text
[PROD][SOC]
{message}
```

Системный текст + постфикс:

```text
{message}

#noc
```

Только статический текст:

```text
Сработал монитор. Подробности в Berkut SCC.
```

## Рекомендация

Оставляйте `{message}` в шаблоне, чтобы сохранить полный состав уведомления.
